# YAMLScript

We use [YAML syntax](https://yaml.org/) to define a set of tasks declaratively, YAMLScript will help
you compile it into Javascript code that runs on Deno. Think about [Lisp](https://en.wikipedia.org/wiki/Lisp_(programming_language)), but in YAML.

> **Note**
> You need to know the basic syntax of YAML, javascript, and maybe a little [Deno](https://deno.land/manual), if you havn't, check out[Learn YAML in Y minutes](https://learnxinyminutes.com/docs/yaml/) and [Learn Javascript in Y minutes](https://learnxinyminutes.com/docs/javascript/), it's not hard!

> **Warning**
> This project is still in a very early stage, the api may consider changes.

YAMLScript is designed to solve the most common problems with minimal knowledge.
It can be considered as an alternative for
[dotfiles utilities](https://dotfiles.github.io/utilities/) such as
[chezmoi](https://www.chezmoi.io/), or an alternative to automated workflows
such as [Ansible](https://www.ansible.com/), it can also be a low-code
alternative to [IFTTT](https://ifttt.com/), [Zapier](https://zapier.com/),
[Pipedream](https://pipedream.com/), etc.


Run task file directly:

```bash
ys run task.ys.yml
```

Build task file and  deploy the compiled code to serverless services such as [Deno Deploy](https://deno.com/deploy):

```bash
ys build task.ys.yml && deployctl deploy --project=helloworld ./dist/task.js
```

In YAMLScript, The following interface is the only property we need to
understand, they are all optional.

```typescript
interface Task {
  id?: string;
  name?: string;
  from?: string;
  use?: string;
  args?: unknown | unknown[];
  loop?: string | number | unknown[];
  if?: boolean | string;
  throw?: boolean;
}
```

And the compiled Javascript code is human readable, so if anything goes wrong,
we can easily locate and fix it. If you run into problems, go to the compiled
Javascript code, which is located in the `dist` directory by default.


## Simple Usage

{{#simpleUsageSources}}

### {{title}}

```yaml
{{{source}}}
```

This will be compiled to:

```javascript
{{{target}}}
```

{{/simpleUsageSources}}

## Advanced Usage

{{#advancedSources}}

### {{title}}

```yaml
{{{source}}}
```

This will be compiled to:

```javascript
{{{target}}}
```

{{/advancedSources}}

## Install

1. Yamlscript depends on Deno, so you should install
   [Deno](https://deno.land/#installation) first.
2. Install YAMLScript by running
   `deno install -A https://deno.land/x/YAMLScript/ys.ts`


## Cli

```bash

  Usage:   ys
  Version: 0.0.1

  Description:

    yamlscript is written in yaml format and can be compiled into javscript that runs in deno.

  Options:

    -h, --help     - Show this help.
    -V, --version  - Show the version number for this program.
    -v, --verbose  - Enable verbose output.

  Commands:

    run    [file...]  - run files
    build  [file...]  - build yaml file to js file
```

```bash
# run some files
ys run a.ys.yml
ys run **/*.yml
ys run a.ys.yml b.ys.yml
# run all .ys.yml files
ys run -A
# run some directories
ys run -d a/b/c

# build is same as run
ys build a.ys.yml
```


## Notes

This README.md file is generated by the following YAMLScript.

```yaml
{{{yamlMakeReadmeScript}}}
```

See all [built-in functions](/globals/mod.ts)

Inspired by [Common Lisp](https://common-lisp.net/),
[Clojure](https://clojure.org/),
[Denoflow](https://github.com/denoflow/denoflow),
[Rash](https://github.com/rash-sh/rash),
[Comtrya](https://github.com/comtrya/comtrya)

