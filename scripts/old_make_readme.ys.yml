- id: readmeYAMLTasks
  use: readYAMLFile
  args: ./README.ys.yml
- id: readmeTemplate
  use: readTextFile
  args: ./README.template.md
- id: yamlSource
  loop: $readmeYAMLTasks
  use: YAML.stringify
  args: $item
- id: sections
  loop: $readmeYAMLTasks
  use: getArgs
  args:
    name: ${item.name}
    desc: ${item.desc || ""}
    source: ${yamlSource[index]}

- id: yamlMakeReadmeScript
  use: readTextFile
  args: ./scripts/make_readme.ys.yml
- id: readmeContent
  from: https://esm.sh/mustache@4.2.0
  use: default.render
  args:
    - $readmeTemplate
    - sections: $sections
      yamlMakeReadmeScript: $yamlMakeReadmeScript
- use: writeTextFile
  args:
    - README.md
    - $readmeContent
